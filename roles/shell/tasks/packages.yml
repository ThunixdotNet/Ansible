# Install our baseline packages for all machines, irrespective of what role they might have
---
- name: Add weechat repo
  apt_repository: 
    repo: 'deb https://weechat.org/debian stretch main' 
    state: present
    filename: weechat
    update_cache: yes

- name: Install baseline packages
  apt: 
    name: "{{ packages }}"
    state: present
    update_cache: yes
  vars:
    packages:
      - alpine
      - bsdgames
      - build-essential
      - byobu
      - cowsay
      - eggdrop
      - elinks
      - emacs
      - fish
      - htop
      - libapache2-mod-php7.0
      - libsdl1.2-dev
      - libssl-dev
      - lynx
      - make
      - mosh
      - mutt
      - openssl
      - pandoc
      - php-imagick
      - php-memcache
      - php-pear
      - php7.0
      - php7.0-curl
      - php7.0-gd
      - php7.0-imap
      - php7.0-intl
      - php7.0-mcrypt
      - php7.0-mysql
      - php7.0-pspell
      - php7.0-recode
      - php7.0-sqlite3
      - php7.0-tidy
      - php7.0-xmlrpc
      - php7.0-xsl
      - python
      - python-certbot-apache
      - python-pip
      - stow
      - tcl
      - tcl-dev
      - tcl-tls
      - tcl8.6
      - tcllib
      - tcltls
      - tdom
      - vim
      - w3m-img
      - weechat
      - znc
      - znc-dev
      - znc-perl
      - znc-python
      - znc-tcl
      - zsh
      - python-twisted
      - python3-twisted
      - openbsd-inetd
      - talk
      - talkd
      - finger
      - fingerd
      - analog
      - libconvert-binhex-perl
      - libmime-tools-perl

#Install python packages, when it's the latest      
- name: Install pip packages
  pip: 
    name: "{{ packages }}"
    state: present
  vars:
    packages:
       - rtv
       - toot
        
- name: Install locally created bins
  copy:
    src: ../files/chat
    dest: /usr/local/bin
    owner: root
    group: root
    mode: 0755
