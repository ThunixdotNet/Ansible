# Install our shell role packages for all machines
---
- name: Add apt key for weechat
  apt_key:
    keyserver: p80.pool.sks-keyservers.net
    id: 11E9DE8848F2B65222AA75B8D1820DB22A11534E
    state: present

- name: Add apt key for toot
  apt_key:
    url: https://keybase.io/ihabunek/pgp_keys.asc
    state: present 

- name: Add apt key for zandronum
  apt_key:
    url: http://debian.drdteam.org/drdteam.gpg
    state: present

- name: Add apt key for mono-project
  apt_key:
    keyserver: hkp://keyserver.ubuntu.com:80
    id: 3FA7E0328081BFF6A14DA29AA6A19B38D3D831EF
    state: present

- name: Add weechat repo
  apt_repository: 
    repo: 'deb https://weechat.org/debian stretch main' 
    state: present
    filename: weechat
    update_cache: yes

- name: Add toot repo
  apt_repository:
    repo: 'deb http://bezdomni.net/packages/ ./'
    state: present
    update_cache: yes

- name: Add zandronum repo
  apt_repository:
    repo: 'deb http://debian.drdteam.org/ stable multiverse' 
    state: present
    update_cache: yes
    
- name: Add debian contrib
  apt_repository:
    repo: 'deb http://ftp.de.debian.org/debian stretch main contrib'
    state: present
    update_cache: yes

- name: Add mono-project repo
  apt_repository:
    repo: 'deb https://download.mono-project.com/repo/debian stable-stretch main' 
    state: present
    update_cache: yes

- name: Install baseline packages
  apt: 
    name: "{{ packages }}"
    state: present
    update_cache: yes
  vars:
    packages:
      - alpine
      - analog
      - bsdgames
      - build-essential
      - byobu
      - bzip2
      - bzflag-server
      - ca-certificates-mono
      - caca-utils
      - cmake
      - cowsay
      - devscripts
      - dos2unix
      - dosemu
      - eggdrop
      - elinks
      - emacs
      - ffmpeg
      - finch
      - finger
      - fingerd
      - fish
      - fortune
      - gitweb
      - gopher
      - htop
      - hugo
      - ident2
      - imagemagick
      - irssi
      - jq
      - lftp
      - libapache2-mod-php7.0
      - libarchive-dev
      - libconvert-binhex-perl
      - libffi-dev
      - libmime-tools-perl
      - libncurses5-dev
      - libsdl1.2-dev
      - libsdl2-dev
      - libssl-dev
      - lynx
      - make
      - mc
      - mc-data
      - minetest-data
      - minetest-mod-advspawning
      - minetest-mod-animalmaterials
      - minetest-mod-animals
      - minetest-mod-maidroid
      - minetest-mod-mesecons
      - minetest-mod-mobf-core
      - minetest-mod-mobf-trap
      - minetest-mod-moreblocks
      - minetest-mod-moreores
      - minetest-mod-nether
      - minetest-mod-pipeworks
      - minetest-mod-torches
      - minetest-server
      - mono-apache-server
      - mono-complete
      - mono-dbg
      - mono-devel
      - mono-xsp4
      - mosh
      - mutt
      - mysql-client
      - mysql-server
      - nasm
      - nbsdgames
      - neofetch
      - openbsd-inetd
      - opendkim
      - openssl
      - p7zip-full
      - pandoc
      - php-imagick
      - php-memcache
      - php-pear
      - php7.0
      - php7.0-curl
      - php7.0-gd
      - php7.0-imap
      - php7.0-intl
      - php7.0-mcrypt
      - php7.0-mysql
      - php7.0-pspell
      - php7.0-recode
      - php7.0-sqlite3
      - php7.0-tidy
      - php7.0-xmlrpc
      - php7.0-xsl
      - pngtools
      - python
      - python-certbot-apache
      - python-pip
      - python-twisted
      - python3-pip
      - python3-toot
      - python3-twisted
      - python3-venv
      - ranger
      - ruby-paint
      - ruby-trollop
      - scala
      - scala-doc
      - scala-library
      - staticsite
      - stow
      - talk
      - talkd
      - tango-icon-theme
      - tcl
      - tcl-dev
      - tcl-tls
      - tcl8.6
      - tcllib
      - tcltls
      - tdom
      - telnet
      - todotxt-cli
      - vim
      - vrms
      - w3m-img
      - weechat
      - wordgrinder-ncurses
      - xfce4
      - xfce4-goodies
      - task-xfce-desktop
      - zandronum-server
      - znc
      - znc-dev
      - znc-perl
      - znc-python
      - znc-tcl
      - zsh

#Install python packages, when it's the latest      
- name: Install pip packages
  pip: 
    name: "{{ packages }}"
    state: present
  vars:
    packages:
       - rtv
        
- name: Install locally created bins
  copy:
    src: ../files/chat
    dest: /usr/local/bin
    owner: root
    group: root
    mode: 0755

- name: Install remote DCSS
  copy:
    src: ../files/usr/local/bin/dcss
    dest: /usr/local/bin/dcss
    owner: root
    group: root
    mode: 0755

- name: Instal tldr
  copy:
    src: ../files/usr/local/bin/tldr
    dest: /usr/local/bin/tldr
    owner: root
    group: root
    mode: 0755

- name: Install CLI wiki browser
  copy:
    src: ../files/usr/local/bin/wiki
    dest: /usr/local/bin/wiki
    owner: root
    group: root
    mode: 0755
