#This play configs apapche for us
---
- name: Add certbot cron job
  copy:
    src: ../files/certbot-renew
    dest: /etc/cron.weekly/certbot-renew
    owner: root
    mode: 744

#Sites
- name: Deploy Apache2 Site Config default-ssl.conf
  copy:
    src: ../files/etc/apache2/sites-available/default-ssl.conf
    dest: /etc/apache2/sites-available/default-ssl.conf

- name: Deploy Apache2 Site Config thunix.cf.conf
  copy:
    src: ../files/etc/apache2/sites-available/thunix.cf.conf
    dest: /etc/apache2/sites-available/thunix.cf.conf

- name: Deploy Apache2 Site Config www.thunix.cf.conf
  copy:
    src: ../files/etc/apache2/sites-available/www.thunix.cf.conf
    dest: /etc/apache2/sites-available/www.thunix.cf.conf

- name: Deploy Apache2 Site Config ftp.thunix.cf.conf
  copy:
    src: ../files/etc/apache2/sites-available/ftp.thunix.cf.conf
    dest: /etc/apache2/sites-available/ftp.thunix.cf.conf

- name: Deploy Apache2 Site Config thunix.net.conf
  copy:
    src: ../files/etc/apache2/sites-available/thunix.net.conf
    dest: /etc/apache2/sites-available/thunix.net.conf

- name: Deploy Apache2 Site Config www.thunix.net.conf
  copy:
    src: ../files/etc/apache2/sites-available/www.thunix.net.conf
    dest: /etc/apache2/sites-available/www.thunix.net.conf

- name: Deploy apache2 site conf for ftp.thunix.net.conf
  copy:
    src: ../files/etc/apache2/sites-available/ftp.thunix.net.conf
    dest: /etc/apache2/sites-available/ftp.thunix.net.conf

- name: Deploy apache2 site conf for staticadventures.netlib.re
  copy:
    src: ../files/etc/apache2/sites-available/staticadventures.netlib.re.conf
    dest: /etc/apache2/sites-available/staticadventures.netlib.re.conf

- name: Deploy apache site conf for deb.thunix.net
  copy:
    src: ../files/etc/apache2/sites-available/deb.thunix.net.conf
    dest: /etc/apache2/sites-available/deb.thunix.net.conf

- name: Deploy apache site conf for rpm.thunix.net
  copy:
    src: ../files/etc/apache2/sites-available/rpm.thunix.net.conf
    dest: /etc/apache2/sites-available/rpm.thunix.net.conf

- name: Deploy apache site conf for stats.thunix.net
  copy:
    src: ../files/etc/apache2/sites-available/stats.thunix.net.conf
    dest: /etc/apache2/sites-available/stats.thunix.net.conf

- name: Deploy apache site conf for wiki.thunix.net
  copy:
    src: ../files/etc/apache2/sites-available/wiki.thunix.net.conf
    dest: /etc/apache2/sites-available/wiki.thunix.net.conf

- name: Deploy apache site conf for mightywcms.thunix.net
  copy:
    src: ../files/etc/apache2/sites-available/mightywcms.thunix.conf
    dest: /etc/apache2/sites-available/mightywcms.thunix.conf

- name: Create the symbolic link for mightywcms.thunix.net
  file:
    src: /etc/apache2/sites-available/mightywcms.thunix.conf
    dest: /etc/apache2/sites-enabled/mightywcms.thunix.conf
    state: link
