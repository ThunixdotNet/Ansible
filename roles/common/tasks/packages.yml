# Install our baseline packages for all machines, irrespective of what role they might have
---
- name: Install bootstrap packages
  apt:
    name: "{{ packages }}"
    state: present
    update_cache: yes
  vars:
    packages:
      - ansible
      - python3
      - python3-apt
      - gpg

- name: Add Thunix Repo
  apt_key:
    url: http://deb.thunix.net/release.key
    state: present

- name: Install baseline packages
  apt: 
    name: "{{ packages }}"
    state: present
    update_cache: yes
  vars:
    packages:
      - apt-transport-https
      - aptitude
      - cron
      - debhelper
      - dpkg-sig
      - git
      - ieee-data
      - libboost-dev
      - letsencrypt
      - man
      - members
      - python
      - python-certbot-apache
      - python-httplib2
      - python-jinja2
      - python-kerberos
      - python-markupsafe
      - python-netaddr
      - python-paramiko
      - python-pip
      - python-pymysql
      - python-selinux
      - python-xmltodict
      - python-yaml
      - python3-pip
      - python3-pymysql
      - sqlite
      - sudo
      - systemd
      - ufw

# Install ansible python package, because it's the latest
- name: Install ansible
  pip:
    name: ansible
